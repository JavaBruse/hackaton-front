<section>
    <!-- –∑–æ–Ω–∞ drag&drop -->
    <div class="drop-zone" (dragover)="allowDrop($event)" (dragleave)="onDragLeave()" (drop)="onFileDropped($event)"
        [class.drag-over]="dragOver">
        <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –≤—Ä—É—á–Ω—É—é</p>
        <input type="file" (change)="onFileSelected($event)" multiple accept="image/*,.zip" style="display: none;"
            #fileInput>
        <button type="button" (click)="fileInput.click()">–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª—ã</button>
    </div>
    <!-- —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ -->
    @if (files.length > 0) {
    <h3>–§–∞–π–ª—ã:</h3>
    <ul>
        @for (f of files; track f.file.name; let i = $index) {
        <li class="file-item">
            @if (f.isImage) {
            <div class="file-row">
                <img [src]="f.preview" alt="preview" class="thumb" />
                <span class="file-info">
                    <strong>{{ f.file.name }}</strong>
                    <div class="size">{{ formatSize(f.file.size) }}</div>
                </span>
                <button (click)="showPreview(f)">–ü—Ä–æ—Å–º–æ—Ç—Ä</button>
                <button (click)="removeFile(i)">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
            } @else {
            <div class="file-row">
                <span class="file-info">üì¶ <strong>{{ f.file.name }}</strong>
                    <div class="size">{{ formatSize(f.file.size) }}</div>
                </span>
                <button (click)="removeFile(i)">–£–¥–∞–ª–∏—Ç—å</button>
            </div>
            }
        </li>
        }
    </ul>
    }

    @if (files.length > 0) {
    <button (click)="onUpload()" [disabled]="uploading">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    }

    <!-- overlay –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
    @if (previewImage) {
    <div class="overlay" (click)="closePreview()">
        <img [src]="previewImage" class="preview-image" />
    </div>
    }
</section>